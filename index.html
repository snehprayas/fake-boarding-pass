<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sneh Prayas Boarding Pass</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <style>
    :root {
      --pink-100: #ffe6f0;
      --accent: #d63384;
      --accent-2: #ff6699;
      --perforation: #eaa1c3;
      --text: #000;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: var(--pink-100);
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      padding: 16px;
      color: var(--text);
    }

    .container {
      width: 100%;
      max-width: 1000px;
      margin: 0 auto;
    }

    h1.main-title {
      text-align: center;
      color: var(--accent);
      font-size: clamp(20px, 5vw, 32px);
      font-weight: 700;
      margin: 8px 0 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .logo-inline { height: 50px; width: auto; }

    .gateway {
      background: #ffffff;
      border-radius: 12px;
      padding: 16px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.06);
      text-align: center;
    }

    .form { display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; }

    .gateway input {
      padding: 10px;
      border: 2px solid #f7c7da;
      border-radius: 10px;
      font-size: 14px;
      width: min(90%, 250px);
      outline: none;
    }

    .button {
      padding: 10px 16px;
      border-radius: 10px;
      background: linear-gradient(135deg, var(--accent-2), var(--accent));
      color: #fff;
      font-weight: 700;
      border: none;
      cursor: pointer;
      font-size: 14px;
    }

    /* Ticket */
    .ticket {
      display: flex;
      flex-wrap: wrap;
      position: relative;
      width: 100%;
      max-width: 880px;
      margin: 20px auto;
      background: var(--pink-100);
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.12);
      overflow: hidden;
    }

    .ticket-header-global {
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 40px;
      background: var(--accent);
      display: flex;
      justify-content: space-around;
      align-items: center;
      font-weight: 700;
      font-size: clamp(12px, 2.5vw, 16px);
      color: #fff;
      z-index: 1;
    }

    .ticket-part {
      flex: 1;
      padding: 55px 12px 16px;
      font-size: clamp(12px, 2.5vw, 14px);
      position: relative;
      text-align: center;
      z-index: 1;
      min-width: 250px;
    }

    /* ✅ Fixed QR section */
    .ticket-part.small { 
      flex: 0 0 220px;
      display: flex;
      align-items: center;
      gap: 12px;
      justify-content: flex-start;
      padding: 55px 12px 16px;
      text-align: left;
    }

    .qr-container {
      flex-shrink: 0;
      width: 80px;
      height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .qr-img {
      width: 70px;
      height: 70px;
      object-fit: contain;
    }

    .passenger-info {
      display: flex;
      flex-direction: column;
      gap: 6px;
      font-size: 12px;
    }

    .passenger-info .info-label { font-size: 11px; color: #444; }
    .passenger-info .info-value { font-size: 13px; font-weight: 700; }

    .ticket-part:not(:last-child) {
      border-right: 2px dashed var(--perforation);
    }

    .ticket::after {
      content: "";
      position: absolute;
      left: 0; right: 0; bottom: 0;
      height: 12px;
      background: repeating-linear-gradient(-45deg, var(--accent) 0 12px, transparent 12px 24px);
      z-index: 1;
    }

    .route { 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      gap: 8px; 
      margin: 10px 0; 
      flex-wrap: wrap;
    }

    .station-name { 
      flex: 1; 
      text-align: center; 
      font-size: clamp(14px, 4vw, 20px); 
      font-weight: 700; 
    }

    .train-img { width: 50px; max-width: 15vw; height: auto; }

    .info-block { margin: 4px 0; }
    .info-label { font-size: clamp(10px, 2vw, 12px); font-weight: 600; color: #555; display: block; }
    .info-value { font-size: clamp(12px, 3vw, 14px); font-weight: 700; }

    .row { display: flex; justify-content: space-between; margin-top: 6px; gap: 10px; flex-wrap: wrap; }
    .row .info-block { flex: 1; min-width: 100px; }

    @media (max-width: 600px) {
      .ticket { flex-direction: column; }
      .ticket-part { border-right: none; border-bottom: 2px dashed var(--perforation); }
      .ticket-part.small { flex-direction: column; align-items: flex-start; }
    }

    #downloadBtn, #downloadAllBtn { display: none; margin: 15px auto; }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="main-title">
      <img src="SNEH_PRAYAS_LOGO.png" alt="Sneh Prayas Logo" class="logo-inline">
      SNEH PRAYAS — BOARDING PASS
    </h1>

    <div class="gateway">
      <div class="form">
        <input type="text" id="bookingId" placeholder="Enter Booking ID">
        <button class="button" onclick="generateTicket()">Generate Ticket</button>
      </div>
    </div>

    <div id="ticketContainer"></div>
    <button id="downloadBtn" class="button" onclick="downloadTicket()">Download Ticket</button>
    <button id="downloadAllBtn" class="button" onclick="downloadAllTickets()">Download All 100 Passes</button>
  </div>

  <!-- ✅ Keep your JS below (unchanged except CSS fixes above) -->
  <script src="passengers.js"></script>
 <script>
    const qrMap = { "AST001B03R038": "ALI363", "AST002B03R038": "ALI364", "AST003B03R038": "ALI365", "AST004B03R037": "ALI368", "AST005B08R078": "ALI369", "AST006B08R078": "ALI370", "AST007B08R078": "ALI371", "AST008B13R051": "BBK341", "AST009B13R053": "BBK342", "AST010B08R080": "BBK343", "AST011B08R081": "BBK344", "AST012B12R066": "BBK345", "AST013B05R114": "BBK346", "AST014B05R111": "BBK347", "AST015B12R066": "BBK348", "AST016B17R026": "BBK349", "AST017B08R080": "BBK350", "AST018B08R081": "BBK351", "AST019B10R094": "BBK352", "AST020B12R070": "BBK353", "AST021B12R067": "BBK354", "AST022B12R067": "BBK355", "AST023B10R093": "BBK356", "AST024B12R067": "BBK357", "AST025B12R068": "BBK358", "AST026B12R068": "BBK359", "AST027B03R024": "BBK360", "AST028B03R041": "BBK361", "AST029B12R070": "BBK362", "AST030B02R015": "BBZ316", "AST031B11R082": "BBZ317", "AST032B12R069": "BBZ318", "AST033B12R069": "BBZ319", "AST034B13R053": "BBZ320", "AST035B10R093": "BBZ321", "AST036B04R024": "BBZ322", "AST037B15R125": "BBZ323", "AST038B09R098": "BBZ324", "AST039B09R098": "BBZ325", "AST040B01R003": "BBZ326", "AST041B09R098": "BBZ327", "AST042B12R071": "BBZ328", "AST043B11R083": "BBZ330", "AST044B11R083": "BBZ331", "AST045B11R083": "BBZ332", "AST046B11R089": "BBZ333", "AST047B01R004": "BBZ334", "AST048B12R072": "BBZ335", "AST049B12R069": "BBZ336", "AST050B04R017": "BBZ339", "AST051B01R004": "BBZ340", "AST052B07R135": "CHOW395", "AST053B07R136": "CHOW396", "AST054B02R014": "CHOW399", "AST055B12R070": "CHOW402", "AST056B01R003": "CHOW403", "AST057B01R001": "CHOW404", "AST058B01R003": "CHOW405", "AST059B01R002": "CHOW406", "AST060B01R002": "CHOW407", "AST061B01R002": "CHOW408", "AST062B05R119": "CHOW409", "AST063B05R120": "CHOW410", "AST064B05R119": "CHOW411", "AST065B05R120": "CHOW412", "AST066B15R125": "IND154", "AST067B15R127": "IND155", "AST068B17R027": "IND156", "AST069B17R027": "IND157", "AST070B17R027": "IND158", "AST071B12R072": "IND159", "AST072B12R072": "IND160", "AST073B11R082": "IND161", "AST074B12R073": "IND162", "AST075B06R108": "IND163", "AST084B04R019": "IND172", "AST085B04R022": "IND173", "AST086B12R071": "IND174", "AST087B11R082": "IND175", "AST096B08R077": "IND185", "AST097B08R077": "IND186", "AST098B08R077": "IND187", "AST101B14R060": "IND190", "AST102B14R060": "IND191", "AST103B14R060": "IND192", "AST104B06R110": "IND193", "AST105B06R111": "IND194", "AST106B02R009": "IND195", "AST107B12R073": "IND196", "AST108B01R006": "KAN372", "AST109B01R007": "KAN373", "AST110B11R085": "KAN374", "AST111B11R086": "KAN375", "AST112B04R019": "KAN376", "AST113B04R024": "KAN377", "AST114B04R021": "KAN378", "AST115B06R114": "KAN379", "AST116B06R113": "KAN380", "AST118B06R110": "KAN384", "AST119B06R113": "KAN385", 
  "AST120B06R114": "KAN386",
  "AST121B06R113": "KAN387",
  "AST122B05R115": "KAN388",
  "AST123B05R115": "KAN389",
  "AST124B05R115": "KAN390",
  "AST125B05R115": "KAN391",
  "AST126B04R019": "KAN392",
  "AST127B08R080": "KAN393",
  "AST128B08R081": "KAN394",
  "AST129B11R084": "NHWH289",
  "AST130B11R084": "NHWH290",
  "AST131B13R055": "NHWH291",
  "AST132B13R056": "NHWH292",
  "AST133B13R055": "NHWH293",
  "AST134B13R056": "NHWH294",
  "AST135B03R041": "NHWH295",
  "AST136B10R095": "NHWH296",
  "AST137B10R095": "NHWH297",
  "AST138B05R120": "NHWH298",
  "AST139B05R119": "NHWH299",
  "AST140B04R020": "NHWH301",
  "AST141B04R022": "NHWH302",
  "AST142B04R022": "NHWH304",
  "AST143B04R020": "NHWH305",
  "AST144B03R040": "NHWH306",
  "AST145B03R034": "NHWH307",
  "AST146B03R040": "NHWH308",
  "AST147B03R034": "NHWH309",
  "AST148B03R040": "NHWH310",
  "AST149B03R034": "NHWH311",
  "AST150B13R055": "NHWH312",
  "AST151B13R050": "NHWH313",
  "AST152B08R076": "NHWH314",
  "AST153B08R079": "NHWH315",
  "AST154B13R054": "SHWH197",
  "AST155B13R054": "SHWH198",
  "AST156B11R087": "SHWH199",
  "AST157B11R088": "SHWH200",
  "AST158B15R125": "SHWH201",
  "AST159B16R042": "SHWH205",
  "AST160B16R042": "SHWH206",
  "AST161B16R042": "SHWH207",
  "AST162B07R135": "SHWH208",
  "AST163B07R136": "SHWH209",
  "AST164B11R088": "SHWH210",
  "AST165B11R084": "SHWH211",
  "AST166B08R079": "SHWH212",
  "AST167B08R076": "SHWH213",
  "AST168B14R062": "SHWH214",
  "AST169B14R062": "SHWH215",
  "AST170B08R075": "SHWH216",
  "AST171B08R075": "SHWH217",
  "AST172B08R075": "SHWH218",
  "AST173B14R061": "SHWH219",
  "AST174B14R061": "SHWH220",
  "AST175B14R061": "SHWH221",
  "AST176B14R061": "SHWH222",
  "AST177B03R039": "SHWH223",
  "AST178B10R096": "SHWH224",
  "AST179B10R097": "SHWH225",
  "AST180B16R046": "SHWH226",
  "AST181B16R048": "SHWH227",
  "AST182B05R116": "SHWH228",
  "AST183B05R116": "SHWH229",
  "AST184B05R116": "SHWH230",
  "AST185B05R116": "SHWH231",
  "AST186B09R105": "SHWH232",
  "AST187B09R105": "SHWH233",
  "AST188B09R105": "SHWH234",
  "AST189B10R097": "SHWH237",
  "AST190B12R073": "SHWH238",
  "AST191B02R014": "SHWH239",
  "AST192B16R045": "SHWH242",
  "AST193B16R044": "SHWH243",
  "AST194B05R118": "SHWH244",
  "AST195B16R043": "SHWH245",
  "AST196B16R043": "SHWH246",
  "AST197B02R013": "SHWH248",
  "AST198B02R014": "SHWH249",
  "AST199B10R094": "SHWH250",
  "AST200B06R110": "SHWH251",
  "AST201B06R111": "SHWH252",
  "AST202B13R051": "SHWH253",
  "AST203B13R056": "SHWH254",
  "AST204B10R091": "SHWH255",
  "AST205B17R033": "SHWH256",
  "AST206B17R033": "SHWH257",
  "AST207B11R085": "SHWH258",
  "AST208B11R086": "SHWH259",
  "AST209B07R129": "SHWH260",
  "AST210B07R130": "SHWH261",
  "AST211B03R036": "SHWH262",
  "AST212B03R035": "SHWH263",
  "AST213B16R049": "SHWH264",
  "AST214B16R049": "SHWH265",
  "AST215B16R049": "SHWH266",
  "AST216B16R049": "SHWH267",
  "AST217B16R043": "SHWH268",
  "AST218B07R135": "SHWH269",
  "AST219B09R103": "SHWH270",
  "AST220B09R101": "SHWH271",
  "AST221B17R029": "SHWH273",
  "AST222B13R053": "SHWH274",
  "AST223B13R057": "SHWH275",
  "AST224B03R039": "SHWH276",
  "AST225B02R013": "SHWH280",
  "AST226B02R010": "SHWH281",
  "AST227B15R124": "SHWH282",
  "AST228B02R010": "SHWH283",
  "AST229B16R045": "SHWH284",
  "AST230B16R044": "SHWH285",
  "AST231B10R096": "SHWH286",
  "AST232B10R097": "SHWH287",
  "AST233B02R010": "SHWH288",
  "AST234B01R006": "SHY413",
  "AST235B01R007": "SHY414",
  "AST236B17R026": "SHY415",
  "AST237B17R026": "SHY416",
  "AST238B17R029": "SHY418",
  "AST239B10R092": "SHY419",
  "AST240B10R092": "SHY420",
  "AST241B10R092": "SHY421",
  "AST242B02R016": "SHY422",
  "AST243B02R015": "SHY423",
  "AST244B09R104": "SHY424",
  "AST245B17R032": "SHY425",
  "AST246B17R032": "SHY426",
  "AST247B09R104": "SHY427",
  "AST248B09R104": "SHY428",
  "AST249B02R016": "SHY429",
  "AST250B02R008": "SHY430",
  "AST251B17R033": "SHY433",
  "AST252B17R032": "SHY434",
  "AST253B15R126": "SPC101",
  "AST254B15R121": "SPC102",
  "AST255B15R126": "SPC103",
  "AST256B15R128": "SPC104",
  "AST257B05R117": "SPC109",
  "AST258B05R117": "SPC110",
  "AST259B05R117": "SPC111",
  "AST260B05R117": "SPC112",
  "AST261B17R028": "SPC113",
  "AST262B17R028": "SPC114",
  "AST263B17R028": "SPC115",
  "AST264B17R030": "SPC116",
  "AST265B10R090": "SPC117",
  "AST266B10R091": "SPC118",
  "AST267B10R090": "SPC119",
  "AST268B10R091": "SPC120",
  "AST269B01R007": "SPC121",
  "AST270B01R006": "SPC122",
  "AST271B13R050": "SPC125",
  "AST272B13R051": "SPC126",
  "AST273B13R050": "SPC127",
  "AST274B13R054": "SPC128",
  "AST275B06R107": "SPC129",
  "AST276B08R074": "SPC130",
  "AST277B08R074": "SPC131",
  "AST278B08R074": "SPC132",
  "AST279B17R030": "SPC133",
  "AST280B17R030": "SPC134",
  "AST281B17R030": "SPC135",
  "AST282B17R029": "SPC136",
  "AST283B12R068": "SPC137",
  "AST284B10R090": "SPC138",
  "AST285B03R039": "SPC140",
  "AST286B03R037": "SPC141",
  "AST287B03R037": "SPC142",
  "AST288B04R017": "SPC143",
  "AST289B04R018": "SPC144",
  "AST290B09R099": "SPC145",
  "AST291B09R099": "SPC146",
  "AST292B09R102": "SPC147",
  "AST293B09R099": "SPC148",
  "AST294B07R131": "SPC149",
  "AST295B07R131": "SPC150",
  "AST296B07R131": "SPC151",
  "AST297B07R133": "SPC152",
  "AST298B02R009": "SPC435",
  "AST299B02R009": "SPC436",
  "AST300B06R112": "SPO437",
  "AST301B10R093": "SPO438",
  "AST302B15R124": "SPO439",
  "AST303B15R124": "SPO440",
  "AST304B02R011": "SPO443",
  "AST305B02R012": "SPO444",
  "AST306B02R011": "SPO445",
  "AST307B02R012": "SPO446",
  "AST310B15R122": "SPO449",
  "AST311B15R123": "SPO450",
  "AST312B15R128": "SPO451",
  "AST313B15R123": "SPO452",
  "AST314B15R122": "SPO453",
  "AST315B07R129": "SPO454",
  "AST316B07R130": "SPO455",
  "AST317B07R132": "SPO456",
  "AST318B07R132": "SPO457",
  "AST319B07R133": "SPO458",
  "AST320B07R132": "SPO459",
  "AST321B07R133": "SPO460",
  "AST322B07R136": "SPO461",
  "AST323B07R134": "SPO462",
  "AST324B07R134": "SPO463",
  "AST325B07R134": "SPO464",
  "AST326B16R047": "SPO465",
  "AST327B16R047": "SPO466",
  "AST328B16R047": "SPO467",
  "AST329B16R047": "SPO468",
  "AST330B04R023": "SPO469",
  "AST331B04R020": "SPO470",
  "AST332B08R079": "SPO473",
  "AST333B08R076": "SPO474",
  "AST334B06R109": "SPO476",
  "AST335B06R109": "SPO477",
  "AST336B09R100": "SPO479",
  "AST340B04R021": "SPO484",
  "AST341B04R023": "SPO485",
  "AST342B04R023": "SPO486",
  "AST343B04R021": "SPO487",
  "AST344B01R004": "SPO488",
  "AST347B16R048": "SPO491",
  "AST348B16R046": "SPO492",
  "AST349B06R112": "SPO493",
  "AST350B06R112": "SPO494",
  "AST352B16R048": "SPO497",
  "AST353B01R005": "SPO498",
  "AST354B01R005": "SPO499",
  "AST355B01R005": "SPO500",
  "AST356B01R008": "SPO501",
  "AST357B01R018": "SPO502",
  "AST358B01R018": "SPO503",
  "AST359B01R001": "SPO504",
  "AST360B13R057": "SPO505",
  "AST361B13R058": "SPO506",
  "AST362B03R035": "SPO507",
  "AST363B03R036": "SPO508",
  "AST364B02R016": "SPO509",
  "AST365B09R103": "SPO510",
  "AST366B09R101": "SPO511",
  "AST367B06R107": "SPO512",
  "AST368B06R106": "SPO513",
  "AST369B17R031": "SPO514",
  "AST370B17R031": "SPO515",
  "AST371B04R017": "SPO516",
  "AST372B04R025": "SPO517",
  "AST373B11R089": "SPO518",
  "AST374B10R094": "SPO519",
  "AST375B13R057": "SPO520",
  "AST376B13R052": "SPO523",
  "AST377B13R052": "SPO524",
  "AST378B09R102": "SPO525",
  "AST379B09R102": "SPO526",
  "AST380B06R108": "SPO528",
  "AST381B11R087": "SPO529",
  "AST382B02R015": "SPO535",
  "AST383B06R108": "SPO536",
  "AST384B11R087": "SPO538",
  "AST385B11R088": "SPO539",
  "AST386B06R106": "SPO540",
  "AST387B01R001": "SPO541",
  "AST388B09R100": "SPO542",
  "AST389B17R031": "SPO543",
  "AST390B10R095": "SPO544",
  "AST391B05R118": "SPO545",
  "AST392B07R129": "SPO546",
  "AST393B07R130": "SPO547",
  "AST394B09R103": "SPO548",
  "AST395B09R101": "SPO549",
  "AST396B14R064": "SPO550",
  "AST397B14R064": "SPO551",
  "AST398B14R065": "SPO552",
  "AST400B14R065": "SPO554",
  "AST401B14R058": "SPO555",
  "AST402B14R058": "SPO556",
  "AST403B06R107": "SPO557",
  "AST404B06R106": "SPO558",
  "AST405B12R066": "SPO559",
  "AST406B10R090": "SPO560",
  "AST407B05R118": "SPO561",
  "AST408B15R124": "SPO562",
  "AST410B15R137": "SPO564",
  "AST411B15R137": "SPO565",
  "AST412B15R137": "SPO566"
}; 

    function generateTicket() {
      const bookingId = document.getElementById('bookingId').value.trim();
      const p = passengers[bookingId];
      const qrId = qrMap[bookingId];

      if (!p) { alert("No booking found for this ID!"); return; }
      if (!qrId) { alert("No QR found for this booking ID!"); return; }

      document.getElementById("ticketContainer").innerHTML = `
        <div class="ticket" id="ticket">
          <div class="ticket-header-global">
            <div class="ticket-header-part">SNEH PRAYAS</div>
            <div class="ticket-header-part">RETURN PASS</div>
            <div class="ticket-header-part">ONWARD PASS</div>
          </div>

          <div class="ticket-part small">
            <div class="qr-container">
              <img src="${qrId}_QR.png" class="qr-img" alt="QR for ${qrId}">
            </div>
            <div class="passenger-info">
              <div class="info-block"><span class="info-label">Booking ID</span><span class="info-value">${bookingId}</span></div>
              <div class="info-block"><span class="info-label">Name</span><span class="info-value">${p.name}</span></div>
              <div class="info-block"><span class="info-label">Phone</span><span class="info-value">${p.phone}</span></div>
              <div class="info-block"><span class="info-label">Gender</span><span class="info-value">${p.gender}</span></div>
            </div>
          </div>

          <div class="ticket-part">
            <div class="info-block"><span class="info-label">Train</span><span class="info-value">${p.return.train}</span></div>
            <div class="route">
              <div class="station-name">${p.return.from}</div>
              <img src="train-right.png" class="train-img" alt="Train">
              <div class="station-name">${p.return.to}</div>
            </div>
            <div class="row">
              <div class="info-block"><span class="info-label">Date</span><span class="info-value">${p.return.date}</span></div>
              <div class="info-block"><span class="info-label">Time</span><span class="info-value">${p.return.time}</span></div>
            </div>
            <div class="row">
              <div class="info-block"><span class="info-label">Coach</span><span class="info-value">${p.return.coach}</span></div>
              <div class="info-block"><span class="info-label">Seat</span><span class="info-value">${p.return.seat}</span></div>
            </div>
          </div>

          <div class="ticket-part">
            <div class="info-block"><span class="info-label">Train</span><span class="info-value">${p.onward.train}</span></div>
            <div class="route">
              <div class="station-name">${p.onward.from}</div>
              <img src="train-right.png" class="train-img" alt="Train">
              <div class="station-name">${p.onward.to}</div>
            </div>
            <div class="row">
              <div class="info-block"><span class="info-label">Date</span><span class="info-value">${p.onward.date}</span></div>
              <div class="info-block"><span class="info-label">Time</span><span class="info-value">${p.onward.time}</span></div>
            </div>
            <div class="row">
              <div class="info-block"><span class="info-label">Coach</span><span class="info-value">${p.onward.coach}</span></div>
              <div class="info-block"><span class="info-label">Seat</span><span class="info-value">${p.onward.seat}</span></div>
            </div>
          </div>
        </div>
      `;

      document.getElementById("downloadBtn").style.display = "block";
      document.getElementById("downloadAllBtn").style.display = "block";
    }

    function downloadTicket() {
      const ticket = document.getElementById("ticket");
      html2canvas(ticket, { scale: 3 }).then(canvas => {
        const link = document.createElement("a");
        link.download = "boarding_pass.png";
        link.href = canvas.toDataURL("image/png");
        link.click();
      });
    }

    async function downloadAllTickets() {
      const zip = new JSZip();
      for (const bookingId in passengers) {
        const p = passengers[bookingId];
        const qrId = qrMap[bookingId];
        if (!p || !qrId) continue;

        const container = document.createElement('div');
        container.style.position = 'absolute';
        container.style.left = '-9999px';
        container.innerHTML = document.getElementById("ticketContainer").innerHTML
          .replace('${bookingId}', bookingId)
          .replace('${p.name}', p.name)
          .replace('${p.phone}', p.phone || '—')
          .replace('${p.gender}', p.gender || '—')
          .replace('${p.return.train}', p.return.train || '')
          .replace('${p.return.from}', p.return.from || '')
          .replace('${p.return.to}', p.return.to || '')
          .replace('${p.return.date}', p.return.date || '')
          .replace('${p.return.time}', p.return.time || '')
          .replace('${p.return.coach}', p.return.coach || '')
          .replace('${p.return.seat}', p.return.seat || '')
          .replace('${p.onward.train}', p.onward.train || '')
          .replace('${p.onward.from}', p.onward.from || '')
          .replace('${p.onward.to}', p.onward.to || '')
          .replace('${p.onward.date}', p.onward.date || '')
          .replace('${p.onward.time}', p.onward.time || '')
          .replace('${p.onward.coach}', p.onward.coach || '')
          .replace('${p.onward.seat}', p.onward.seat || '')
          .replace('${qrId}_QR.png', `${qrId}_QR.png`);

        document.body.appendChild(container);
        const ticketDiv = container.firstElementChild;

        const canvas = await html2canvas(ticketDiv, { scale: 3 });
        const dataURL = canvas.toDataURL("image/png");
        const base64 = dataURL.split(',')[1];

        zip.file(`${bookingId}.png`, base64, { base64: true });
        document.body.removeChild(container);
      }

      zip.generateAsync({ type: "blob" }).then(content => {
        const link = document.createElement("a");
        link.href = URL.createObjectURL(content);
        link.download = "All_Boarding_Passes.zip";
        link.click();
      });
    }
  </script>
</body>
</html>
